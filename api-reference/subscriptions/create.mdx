---
title: "Create Subscription"
openapi: "POST /v1/subscriptions"
---

Creates a new recurring billing subscription for a customer using a stored or new card payment method.

## When to use

Use this endpoint to set up recurring charges on a customer's card. Subscriptions support configurable billing frequencies, trial periods, retry logic for failed payments, and fixed billing cycle limits.

## Authentication

All requests require the following headers:

| Header | Description |
|--------|-------------|
| `public-api-key` | Your Yuno public API key |
| `private-secret-key` | Your Yuno private secret key |
| `x-idempotency-key` | Unique UUID to prevent duplicate subscription creation |

## Request example

<CodeGroup>
```bash cURL
curl -X POST https://api-sandbox.y.uno/v1/subscriptions \
  -H "public-api-key: your-public-key" \
  -H "private-secret-key: your-secret-key" \
  -H "x-idempotency-key: 550e8400-e29b-41d4-a716-446655440000" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Premium Monthly Plan",
    "account_id": "493e9374-510a-4201-9e09-de669d75f256",
    "country": "US",
    "amount": {
      "currency": "USD",
      "value": 15000
    },
    "payment_method": {
      "type": "CARD",
      "vaulted_token": "d4aa3586-def2-4705-b7cd-fe064bb764e6"
    },
    "frequency": {
      "type": "MONTH",
      "value": 1
    },
    "billing_cycles": {
      "total": 12
    },
    "customer_payer": {
      "id": "a1d3b664-e32a-4508-9da1-9ede3e62a60c"
    }
  }'
```

```javascript Node.js
const response = await fetch('https://api-sandbox.y.uno/v1/subscriptions', {
  method: 'POST',
  headers: {
    'public-api-key': 'your-public-key',
    'private-secret-key': 'your-secret-key',
    'x-idempotency-key': '550e8400-e29b-41d4-a716-446655440000',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    name: 'Premium Monthly Plan',
    account_id: '493e9374-510a-4201-9e09-de669d75f256',
    country: 'US',
    amount: { currency: 'USD', value: 15000 },
    payment_method: {
      type: 'CARD',
      vaulted_token: 'd4aa3586-def2-4705-b7cd-fe064bb764e6'
    },
    frequency: { type: 'MONTH', value: 1 },
    billing_cycles: { total: 12 },
    customer_payer: { id: 'a1d3b664-e32a-4508-9da1-9ede3e62a60c' }
  })
});
const subscription = await response.json();
```

```python Python
import requests

response = requests.post(
    'https://api-sandbox.y.uno/v1/subscriptions',
    headers={
        'public-api-key': 'your-public-key',
        'private-secret-key': 'your-secret-key',
        'x-idempotency-key': '550e8400-e29b-41d4-a716-446655440000',
        'Content-Type': 'application/json'
    },
    json={
        'name': 'Premium Monthly Plan',
        'account_id': '493e9374-510a-4201-9e09-de669d75f256',
        'country': 'US',
        'amount': {'currency': 'USD', 'value': 15000},
        'payment_method': {
            'type': 'CARD',
            'vaulted_token': 'd4aa3586-def2-4705-b7cd-fe064bb764e6'
        },
        'frequency': {'type': 'MONTH', 'value': 1},
        'billing_cycles': {'total': 12},
        'customer_payer': {'id': 'a1d3b664-e32a-4508-9da1-9ede3e62a60c'}
    }
)
subscription = response.json()
```
</CodeGroup>

## Key parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `name` | string | Yes | Subscription plan name (3-255 characters) |
| `account_id` | string | Yes | Your Yuno account UUID |
| `country` | string | Yes | ISO 3166-1 alpha-2 country code |
| `amount.currency` | string | Yes | ISO 4217 currency code |
| `amount.value` | number | Yes | Charge amount per billing cycle |
| `payment_method.type` | string | Yes | Must be `CARD` |
| `payment_method.vaulted_token` | string | No | Vaulted card token from a previous enrollment |
| `frequency.type` | string | No | `DAY`, `WEEK`, or `MONTH` (default: `MONTH`) |
| `frequency.value` | integer | No | Interval between charges (default: `1`) |
| `billing_cycles.total` | integer | No | Total number of billing cycles before completion |
| `billing_date.type` | string | No | `PREPAID`, `POSTDATE`, or `DAY`. Mutually exclusive with `frequency` |
| `trial_period.billing_cycles` | integer | No | Number of trial cycles (default: `1`) |
| `trial_period.amount` | object | No | Reduced amount during trial (currency + value) |
| `retries.retry_on_decline` | boolean | No | Retry after payment decline (default: `false`) |
| `retries.amount` | integer | No | Max retry attempts (up to 6) |
| `retries.schedule` | array | No | Per-attempt delay configuration |
| `retries.stop_on_hard_decline` | boolean | No | Stop retrying on hard declines |
| `initial_payment_validation` | boolean | No | Wait for first payment success before activating (default: `false`) |
| `metadata` | array | No | Up to 50 key-value pairs (key max 48 chars, value max 512 chars) |

## Response

A successful request returns the full subscription object with status `ACTIVE`:

```json
{
  "id": "0c7fed3e-ee0d-4d34-9547-778be4ec0798",
  "name": "Premium Monthly Plan",
  "account_id": "493e9374-510a-4201-9e09-de669d75f256",
  "country": "US",
  "status": "ACTIVE",
  "amount": { "currency": "USD", "value": 15000 },
  "frequency": { "type": "MONTH", "value": 1 },
  "billing_cycles": {
    "total": 12,
    "current": 1,
    "next_at": "2024-09-30T12:04:23.265393Z"
  },
  "customer_payer": { "id": "a1d3b664-e32a-4508-9da1-9ede3e62a60c" },
  "payment_method": {
    "type": "CARD",
    "vaulted_token": "d4aa3586-def2-4705-b7cd-fe064bb764e6"
  },
  "availability": {
    "start_at": "2024-09-30T12:04:23.265393Z",
    "finish_at": null
  },
  "trial_period": null,
  "metadata": null,
  "created_at": "2024-09-30T12:04:23.265372Z",
  "updated_at": "2024-09-30T12:04:23.265372Z"
}
```

## Error responses

| Status | Description | Resolution |
|--------|-------------|------------|
| 400 | Invalid request body or missing required fields | Check field formats, ensure `name` is 3-255 chars, `country` is valid ISO code |
| 401 | Invalid or missing API keys | Verify `public-api-key` and `private-secret-key` headers |

## Subscription status lifecycle

```
CREATED --> ACTIVE --> PAUSED --> ACTIVE (resume)
                  \         \
                   \         --> CANCELED (terminal)
                    --> CANCELED (terminal)
                    --> COMPLETED (terminal)
```

- **ACTIVE** -- Subscription is live and billing on schedule
- **PAUSED** -- Temporarily stopped; can be resumed or canceled
- **CANCELED** -- Terminal state; cannot be reverted
- **COMPLETED** -- Terminal state; reached `billing_cycles` limit or `finish_at` date

## Related endpoints

- [Retrieve Subscription](/api-reference/subscriptions/get) -- Get full subscription details
- [Update Subscription](/api-reference/subscriptions/update) -- Modify subscription parameters
- [Pause Subscription](/api-reference/subscriptions/pause) -- Temporarily stop billing
- [Cancel Subscription](/api-reference/subscriptions/cancel) -- Permanently cancel

<Note>
The `billing_date` and `frequency` fields are mutually exclusive. If both `billing_cycles.total` and `availability.finish_at` are set, the subscription transitions to `COMPLETED` when whichever condition is reached first.
</Note>
