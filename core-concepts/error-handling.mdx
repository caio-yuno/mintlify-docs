---
title: "Error Handling"
description: "Handle Yuno API errors gracefully with proper error parsing, categorization, and retry strategies"
---

## Error Response Format

All Yuno API errors follow a consistent JSON structure:

```json
{
  "error": {
    "code": "INVALID_FIELD",
    "message": "customer.document is required for PIX",
    "type": "VALIDATION_ERROR",
    "details": [
      {
        "field": "customer.document",
        "message": "This field is required for the selected payment method"
      }
    ]
  }
}
```

| Field | Type | Description |
|-------|------|-------------|
| `code` | string | Machine-readable error code for programmatic handling |
| `message` | string | Human-readable description of the error |
| `type` | string | Error category (see below) |
| `details` | array | Field-level errors when multiple validation issues exist |

## Error Categories

### Client Errors (4xx)

| Status | Type | Common Causes | Action |
|--------|------|---------------|--------|
| `400` | `VALIDATION_ERROR` | Missing required fields, invalid format, malformed JSON | Fix request payload |
| `401` | `AUTHENTICATION_ERROR` | Invalid or missing API keys | Check `public-api-key`, `private-secret-key`, `account-code` |
| `403` | `AUTHORIZATION_ERROR` | Payment method not enabled, permission denied | Check Dashboard configuration |
| `404` | `NOT_FOUND` | Invalid endpoint, resource does not exist | Verify URL and resource ID |
| `409` | `CONFLICT` | Idempotency key reused with different payload | Use a new idempotency key |
| `422` | `UNPROCESSABLE_ENTITY` | Valid JSON but semantically incorrect | Review field values and business rules |
| `429` | `RATE_LIMIT_ERROR` | Too many requests | Implement exponential backoff |

### Server Errors (5xx)

| Status | Type | Common Causes | Action |
|--------|------|---------------|--------|
| `500` | `INTERNAL_ERROR` | Yuno server error | Retry with idempotency key |
| `502` | `GATEWAY_ERROR` | Provider unreachable | Retry or wait for provider recovery |
| `503` | `SERVICE_UNAVAILABLE` | Yuno maintenance or overload | Retry with backoff |
| `504` | `TIMEOUT_ERROR` | Provider did not respond in time | Retry with idempotency key |

## Common Errors by Payment Method

### PIX

| Error Code | Message | Fix |
|------------|---------|-----|
| `INVALID_FIELD` | `customer.document is required` | Add `customer.document` with CPF or CNPJ |
| `INVALID_FORMAT` | `document_number format is invalid` | Use 11 digits (CPF) or 14 digits (CNPJ), no formatting |
| `METHOD_NOT_AVAILABLE` | `PIX is not enabled` | Enable PIX in Dashboard > Payment Methods > Brazil |

### Cards

| Error Code | Message | Fix |
|------------|---------|-----|
| `INVALID_CARD_NUMBER` | `Card number is invalid` | Verify Luhn check, correct number of digits |
| `EXPIRED_CARD` | `Card has expired` | Use a valid expiration date |
| `THREE_DS_REQUIRED` | `3DS authentication required` | Implement 3DS flow via SDK or redirect |

## Retry Strategies

<Note>
  Always include an `X-Idempotency-Key` header when retrying requests. This prevents duplicate transactions even if the original request succeeded but the response was lost. See [Idempotency](/core-concepts/idempotency).
</Note>

### Exponential Backoff

For rate limits (429) and server errors (5xx), implement exponential backoff:

```javascript
async function retryWithBackoff(fn, maxRetries = 3) {
  for (let attempt = 0; attempt <= maxRetries; attempt++) {
    try {
      return await fn();
    } catch (error) {
      if (attempt === maxRetries) throw error;

      const isRetryable = [429, 500, 502, 503, 504].includes(error.status);
      if (!isRetryable) throw error;

      const delay = Math.min(1000 * Math.pow(2, attempt), 30000);
      await new Promise(resolve => setTimeout(resolve, delay));
    }
  }
}
```

### What to Retry vs What Not to Retry

| Retryable | Non-Retryable |
|-----------|---------------|
| `429` Rate limit exceeded | `400` Validation error (fix payload first) |
| `500` Internal server error | `401` Authentication error (fix credentials) |
| `502` Gateway error | `403` Authorization error (fix configuration) |
| `503` Service unavailable | `404` Not found (fix endpoint/ID) |
| `504` Timeout | `409` Conflict (use new idempotency key) |

<Warning>
  Never retry `400` or `401` errors automatically. These indicate a problem with your request that must be fixed before retrying. Automated retries on these codes waste rate limit budget and will never succeed.
</Warning>

## Error Handling Best Practices

- **Parse the `code` field** for programmatic handling, not the `message` (messages may change)
- **Log full error responses** including headers and request body for debugging
- **Surface `details` array** to identify which specific fields failed validation
- **Monitor error rates** by code and endpoint to detect integration issues early
- **Set up alerts** for spikes in 5xx errors, which may indicate provider outages
