---
title: "Webhook Setup"
description: "Register webhook endpoints to receive real-time payment event notifications from Yuno"
---

## Overview

Webhooks notify your server in real time when events occur in your Yuno account -- payments approved, refunds completed, subscriptions renewed, disputes opened, and more. They are essential for reliable payment processing because API responses alone may not reflect the final transaction state.

<Warning>
Never rely solely on synchronous API responses for payment fulfillment. Always use webhooks as the authoritative source for final payment status. Asynchronous payment methods like PIX and Boleto will return `PENDING` in the API response and only resolve via webhook.
</Warning>

## How Webhooks Work

```
+-----------+     +-----------+     +-----------+
|   Yuno    |     | Internet  |     |   Your    |
|  Platform | --> |           | --> |  Server   |
+-----------+     +-----------+     +-----------+
  Event occurs      HTTPS POST       Process event
  (payment.succeeded)  with JSON      Return 200 OK
                       payload
```

1. An event occurs in your Yuno account (e.g., a payment is captured)
2. Yuno sends an HTTPS POST request to your registered endpoint with the event payload
3. Your server validates the signature, processes the event, and responds with `200 OK`
4. If your server fails to respond, Yuno retries with exponential backoff

## Register a Webhook Endpoint

### Option 1: Via the Dashboard

<Steps>
  <Step title="Prepare your endpoint">
    Create an HTTPS endpoint on your server that accepts POST requests and returns a `200` status code. Your endpoint must be publicly accessible.

    <CodeGroup>
    ```javascript Node.js (Express)
    const express = require('express');
    const app = express();

    app.post('/webhooks/yuno', express.json(), (req, res) => {
      const event = req.body;
      console.log('Received event:', event.event);

      // Always respond immediately with 200
      res.status(200).send('OK');

      // Then process asynchronously
      processEventAsync(event).catch(console.error);
    });

    async function processEventAsync(event) {
      switch (event.event) {
        case 'payment.succeeded':
          await fulfillOrder(event.data);
          break;
        case 'payment.failed':
          await handlePaymentFailure(event.data);
          break;
        case 'payment.declined':
          await notifyCustomerDecline(event.data);
          break;
        case 'refund.succeeded':
          await processRefund(event.data);
          break;
      }
    }

    app.listen(3000);
    ```

    ```python Python (Flask)
    from flask import Flask, request
    import threading

    app = Flask(__name__)

    @app.route('/webhooks/yuno', methods=['POST'])
    def webhook_handler():
        event = request.get_json()
        print(f"Received event: {event['event']}")

        # Respond immediately
        # Process asynchronously in a background thread
        thread = threading.Thread(
            target=process_event_async,
            args=(event,)
        )
        thread.start()

        return 'OK', 200

    def process_event_async(event):
        event_type = event['event']
        if event_type == 'payment.succeeded':
            fulfill_order(event['data'])
        elif event_type == 'payment.failed':
            handle_payment_failure(event['data'])
        elif event_type == 'payment.declined':
            notify_customer_decline(event['data'])
        elif event_type == 'refund.succeeded':
            process_refund(event['data'])
    ```

    ```go Go
    package main

    import (
        "encoding/json"
        "fmt"
        "io"
        "net/http"
    )

    type WebhookEvent struct {
        ID        string                 `json:"id"`
        Event     string                 `json:"event"`
        Timestamp string                 `json:"timestamp"`
        Data      map[string]interface{} `json:"data"`
    }

    func webhookHandler(w http.ResponseWriter, r *http.Request) {
        body, _ := io.ReadAll(r.Body)

        var event WebhookEvent
        json.Unmarshal(body, &event)

        fmt.Printf("Received event: %s\n", event.Event)

        // Respond immediately
        w.WriteHeader(http.StatusOK)
        w.Write([]byte("OK"))

        // Process asynchronously
        go processEvent(event)
    }

    func processEvent(event WebhookEvent) {
        switch event.Event {
        case "payment.succeeded":
            // fulfillOrder(event.Data)
        case "payment.failed":
            // handleFailure(event.Data)
        }
    }

    func main() {
        http.HandleFunc("/webhooks/yuno", webhookHandler)
        http.ListenAndServe(":3000", nil)
    }
    ```

    ```php PHP
    <?php
    // webhooks/yuno.php

    $payload = file_get_contents('php://input');
    $event = json_decode($payload, true);

    error_log("Received event: " . $event['event']);

    // Respond immediately
    http_response_code(200);
    echo 'OK';

    // Flush output to client
    if (function_exists('fastcgi_finish_request')) {
        fastcgi_finish_request();
    }

    // Process the event after responding
    switch ($event['event']) {
        case 'payment.succeeded':
            fulfillOrder($event['data']);
            break;
        case 'payment.failed':
            handlePaymentFailure($event['data']);
            break;
        case 'refund.succeeded':
            processRefund($event['data']);
            break;
    }
    ```
    </CodeGroup>
  </Step>

  <Step title="Register in the Dashboard">
    1. Log in to the [Yuno Dashboard](https://dashboard.y.uno)
    2. Navigate to **Settings > Webhooks**
    3. Click **Add Endpoint**
    4. Enter your HTTPS URL (e.g., `https://api.yoursite.com/webhooks/yuno`)
    5. Select the events you want to receive
    6. Click **Save**
    7. Copy the **signing secret** -- you will need it to [verify signatures](/guides/webhooks/verify-signatures)

    <Note>
    You can register multiple webhook endpoints. Each endpoint can subscribe to different event types, allowing you to route events to different services.
    </Note>
  </Step>

  <Step title="Test your endpoint">
    Use the **Send Test Event** button in the Dashboard to verify your endpoint receives and processes events correctly. See [Testing Locally](/guides/webhooks/testing-locally) for development setup.
  </Step>
</Steps>

### Option 2: Via the API

Register a webhook endpoint programmatically:

<CodeGroup>
```bash cURL
curl -X POST https://api-sandbox.y.uno/v1/webhooks \
  -H "public-api-key: YOUR_PUBLIC_KEY" \
  -H "private-secret-key: YOUR_PRIVATE_KEY" \
  -H "account-code: YOUR_ACCOUNT_CODE" \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://api.yoursite.com/webhooks/yuno",
    "events": [
      "payment.created",
      "payment.succeeded",
      "payment.failed",
      "payment.declined",
      "payment.cancelled",
      "refund.succeeded",
      "refund.failed"
    ]
  }'
```

```javascript Node.js
const response = await fetch('https://api-sandbox.y.uno/v1/webhooks', {
  method: 'POST',
  headers: {
    'public-api-key': process.env.YUNO_PUBLIC_KEY,
    'private-secret-key': process.env.YUNO_PRIVATE_KEY,
    'account-code': process.env.YUNO_ACCOUNT_CODE,
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    url: 'https://api.yoursite.com/webhooks/yuno',
    events: [
      'payment.created',
      'payment.succeeded',
      'payment.failed',
      'payment.declined',
      'payment.cancelled',
      'refund.succeeded',
      'refund.failed',
    ],
  }),
});

const webhook = await response.json();
// Store webhook.signing_secret securely
```

```python Python
import requests
import os

response = requests.post(
    'https://api-sandbox.y.uno/v1/webhooks',
    headers={
        'public-api-key': os.environ['YUNO_PUBLIC_KEY'],
        'private-secret-key': os.environ['YUNO_PRIVATE_KEY'],
        'account-code': os.environ['YUNO_ACCOUNT_CODE'],
        'Content-Type': 'application/json',
    },
    json={
        'url': 'https://api.yoursite.com/webhooks/yuno',
        'events': [
            'payment.created',
            'payment.succeeded',
            'payment.failed',
            'payment.declined',
            'payment.cancelled',
            'refund.succeeded',
            'refund.failed',
        ],
    },
)

webhook = response.json()
# Store webhook['signing_secret'] securely
```
</CodeGroup>

## Endpoint Requirements

| Requirement | Details |
|-------------|---------|
| **Protocol** | HTTPS only (HTTP is rejected) |
| **Accessibility** | Must be publicly accessible (not `localhost`) |
| **Response** | Must return `200` status code within 15 seconds |
| **Method** | Must accept `POST` requests |
| **Content-Type** | Must accept `application/json` |
| **TLS** | TLS 1.2 or higher required |

## Webhook Payload Structure

All webhook events share this structure:

```json
{
  "id": "evt_abc123def456",
  "event": "payment.succeeded",
  "timestamp": "2026-01-15T14:30:00.000Z",
  "data": {
    "id": "pay_xyz789",
    "status": "SUCCEEDED",
    "amount": {
      "currency": "USD",
      "value": 100.00
    },
    "payment_method": {
      "type": "CARD",
      "card": {
        "last_four": "4242",
        "brand": "VISA"
      }
    },
    "merchant_order_id": "order-123"
  }
}
```

| Field | Type | Description |
|-------|------|-------------|
| `id` | `string` | Unique event identifier (use for idempotency) |
| `event` | `string` | Event type (e.g., `payment.succeeded`) |
| `timestamp` | `string` | ISO 8601 datetime when the event occurred |
| `data` | `object` | Full resource object at the time of the event |

See [Webhook Events](/guides/webhooks/events) for the complete list of event types and their payload examples.

## Retry Policy

If your endpoint fails to respond with a `2xx` status code or times out, Yuno retries with exponential backoff:

| Attempt | Delay After Failure |
|---------|---------------------|
| 1st retry | 5 minutes |
| 2nd retry | 30 minutes |
| 3rd retry | 2 hours |
| 4th retry | 8 hours |
| 5th retry | 24 hours |

After 5 failed retries, the event is marked as **failed**. You can review and manually retry failed events from **Dashboard > Settings > Webhooks > Failed Deliveries**.

<Note>
Your endpoint must respond within **15 seconds**. If your event processing takes longer, respond with `200` immediately and handle the event asynchronously using a message queue or background job.
</Note>

## Subscribable Event Types

| Category | Events |
|----------|--------|
| **Payments** | `payment.created`, `payment.authorized`, `payment.succeeded`, `payment.failed`, `payment.declined`, `payment.cancelled`, `payment.expired`, `payment.refunded`, `payment.partially_refunded` |
| **Subscriptions** | `subscription.created`, `subscription.updated`, `subscription.paused`, `subscription.resumed`, `subscription.cancelled`, `subscription.payment.succeeded`, `subscription.payment.failed`, `subscription.retry_scheduled`, `subscription.retry_succeeded`, `subscription.retry_failed`, `subscription.dunning.final_action` |
| **Payouts** | `payout.created`, `payout.succeeded`, `payout.failed` |
| **Customers** | `customer.created`, `customer.updated`, `customer.deleted` |
| **Disputes** | `dispute.created`, `dispute.updated`, `dispute.won`, `dispute.lost` |
| **BaaS** | `baas.entity.created`, `baas.entity.updated`, `baas.onboarding.created`, `baas.onboarding.updated`, `baas.onboarding.approved`, `baas.onboarding.rejected`, `baas.account.created`, `baas.account.updated`, `baas.account.closed`, `baas.transfer.created`, `baas.transfer.completed`, `baas.transfer.failed`, `baas.transfer.cancelled` |

## Best Practices

1. **Verify signatures** -- Always [verify webhook signatures](/guides/webhooks/verify-signatures) before processing events to prevent spoofing.

2. **Process idempotently** -- Use the event `id` field to detect and skip duplicate deliveries. Yuno guarantees at-least-once delivery, so you may receive the same event more than once.

3. **Respond immediately** -- Return `200` before processing the event. Use a message queue (SQS, RabbitMQ, Redis) or background job system to handle events asynchronously.

4. **Handle out-of-order delivery** -- Events may arrive out of order. Use the `timestamp` field and resource status to ensure correct processing. A `payment.succeeded` event may arrive before `payment.created` in rare cases.

5. **Log all events** -- Store raw event payloads for debugging, reconciliation, and audit trails.

6. **Monitor delivery** -- Check **Dashboard > Settings > Webhooks** regularly for failed deliveries. Set up alerts for sustained delivery failures.

7. **Use separate endpoints per environment** -- Register different webhook URLs for sandbox and production to avoid mixing test and live events.

<Warning>
In sandbox, some webhook event types may return 404 errors. This is a known limitation. Test your webhook handler with the events that are available in sandbox and verify full coverage when switching to production.
</Warning>

## Next Steps

<CardGroup cols={2}>
  <Card title="Webhook Events" icon="list" href="/guides/webhooks/events">
    Complete reference of all event types with payload examples.
  </Card>
  <Card title="Verify Signatures" icon="shield-check" href="/guides/webhooks/verify-signatures">
    Validate webhook authenticity using HMAC-SHA256.
  </Card>
  <Card title="Testing Locally" icon="laptop-code" href="/guides/webhooks/testing-locally">
    Set up local webhook testing with ngrok.
  </Card>
  <Card title="Sandbox Guide" icon="flask" href="/guides/testing/sandbox-guide">
    Configure your sandbox environment for testing.
  </Card>
</CardGroup>
